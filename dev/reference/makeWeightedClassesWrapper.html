<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Creates a wrapper, which can be used like any other learner object.
Fitting is performed in a weighted fashion where each observation receives a weight,
depending on the class it belongs to, see wcw.weight.
This might help to mitigate problems caused by imbalanced class distributions.
This weighted fitting can be achieved in two ways:
a) The learner already has a parameter for class weighting, so one weight can directly be defined
per class. Example: &amp;#8220;classif.ksvm&amp;#8221; and parameter class.weights.
In this case we don't really do anything fancy. We convert wcw.weight a bit,
but basically simply bind its value to the class weighting param.
The wrapper in this case simply offers a convenient, consistent fashion for class weighting -
and tuning! See example below.
b) The learner does not have a direct parameter to support class weighting, but
supports observation weights, so hasLearnerProperties(learner, 'weights') is TRUE.
This means that an individual, arbitrary weight can be set per observation during training.
We set this weight depending on the class internally in the wrapper. Basically we introduce
something like a new &amp;#8220;class.weights&amp;#8221; parameter for the learner via observation weights."><title>Wraps a classifier for weighted fitting where each class receives a weight. — makeWeightedClassesWrapper • mlr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Roboto-0.4.0/font.css" rel="stylesheet"><link href="../deps/_JetBrains%20Mono-0.4.0/font.css" rel="stylesheet"><link href="../deps/_Roboto%20Slab-0.4.0/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Wraps a classifier for weighted fitting where each class receives a weight. — makeWeightedClassesWrapper"><meta property="og:description" content="Creates a wrapper, which can be used like any other learner object.
Fitting is performed in a weighted fashion where each observation receives a weight,
depending on the class it belongs to, see wcw.weight.
This might help to mitigate problems caused by imbalanced class distributions.
This weighted fitting can be achieved in two ways:
a) The learner already has a parameter for class weighting, so one weight can directly be defined
per class. Example: &amp;#8220;classif.ksvm&amp;#8221; and parameter class.weights.
In this case we don't really do anything fancy. We convert wcw.weight a bit,
but basically simply bind its value to the class weighting param.
The wrapper in this case simply offers a convenient, consistent fashion for class weighting -
and tuning! See example below.
b) The learner does not have a direct parameter to support class weighting, but
supports observation weights, so hasLearnerProperties(learner, 'weights') is TRUE.
This means that an individual, arbitrary weight can be set per observation during training.
We set this weight depending on the class internally in the wrapper. Basically we introduce
something like a new &amp;#8220;class.weights&amp;#8221; parameter for the learner via observation weights."><meta property="og:image" content="https://mlr.mlr-org.com/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mlr</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.19.0.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-basics">Basics</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-basics">
    <a class="dropdown-item" href="../articles/tutorial/task.html">Task</a>
    <a class="dropdown-item" href="../articles/tutorial/learner.html">Learner</a>
    <a class="dropdown-item" href="../articles/tutorial/train.html">Train</a>
    <a class="dropdown-item" href="../articles/tutorial/predict.html">Predict</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/tutorial/preproc.html">Preprocessing</a>
    <a class="dropdown-item" href="../articles/tutorial/tune.html">Tuning</a>
    <a class="dropdown-item" href="../articles/tutorial/resample.html">Resampling</a>
    <a class="dropdown-item" href="../articles/tutorial/benchmark_experiments.html">Benchmarking</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/tutorial/parallelization.html">Parallelization</a>
    <a class="dropdown-item" href="../articles/tutorial/performance.html">Performance</a>
    <a class="dropdown-item" href="../articles/tutorial/visualization.html">Visualization</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/tutorial/usecase_regression.html">Use case - Regression</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-advanced">Advanced</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-advanced">
    <a class="dropdown-item" href="../articles/tutorial/configureMlr.html">mlr Configuration</a>
    <a class="dropdown-item" href="../articles/tutorial/wrapper.html">Wrapped Learners</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/tutorial/impute.html">Imputation</a>
    <a class="dropdown-item" href="../articles/tutorial/bagging.html">Generic Bagging</a>
    <a class="dropdown-item" href="../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    <a class="dropdown-item" href="../articles/tutorial/feature_selection.html">Feature Selection/Filtering</a>
    <a class="dropdown-item" href="../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    <a class="dropdown-item" href="../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    <a class="dropdown-item" href="../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    <a class="dropdown-item" href="../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    <a class="dropdown-item" href="../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    <a class="dropdown-item" href="../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    <a class="dropdown-item" href="../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    <a class="dropdown-item" href="../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/tutorial/multilabel.html">Multilabel Classification</a>
    <a class="dropdown-item" href="../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    <a class="dropdown-item" href="../articles/tutorial/handling_of_spatial_data.html">Spatial Data</a>
    <a class="dropdown-item" href="../articles/tutorial/functional_data.html">Functional Data</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-extending">Extending</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-extending">
    <a class="dropdown-item" href="../articles/tutorial/create_learner.html">Create Custom Learners</a>
    <a class="dropdown-item" href="../articles/tutorial/create_measure.html">Create Custom Measures</a>
    <a class="dropdown-item" href="../articles/tutorial/create_imputation.html">Create Custom Imputation Methods</a>
    <a class="dropdown-item" href="../articles/tutorial/create_filter.html">Create Custom Filters</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-appendix">Appendix</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-appendix">
    <a class="dropdown-item" href="../articles/tutorial/example_tasks.html">Integrated Tasks</a>
    <a class="dropdown-item" href="../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    <a class="dropdown-item" href="../articles/tutorial/measures.html">Integrated Measures</a>
    <a class="dropdown-item" href="../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/tutorial/mlr_publications.html">mlr Publications</a>
    <a class="external-link dropdown-item" href="https://github.com/mlr-org/mlr-outreach">Talks, Videos and Workshops</a>
    <div class="dropdown-divider"></div>
    <a class="external-link dropdown-item" href="https://mlrmbo.mlr-org.com">mlrMBO</a>
    <a class="external-link dropdown-item" href="https://https://mlrcpo.mlr-org.com">mlrCPO</a>
    <a class="external-link dropdown-item" href="https://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    <a class="external-link dropdown-item" href="http://openml.github.io/openml-r/">OpenML</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mlr-org/mlr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Wraps a classifier for weighted fitting where each class receives a weight.</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr/blob/HEAD/R/WeightedClassesWrapper.R" class="external-link"><code>R/WeightedClassesWrapper.R</code></a></small>
      <div class="d-none name"><code>makeWeightedClassesWrapper.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a wrapper, which can be used like any other learner object.</p>
<p>Fitting is performed in a weighted fashion where each observation receives a weight,
depending on the class it belongs to, see <code>wcw.weight</code>.
This might help to mitigate problems caused by imbalanced class distributions.</p>
<p>This weighted fitting can be achieved in two ways:</p>
<p>a) The learner already has a parameter for class weighting, so one weight can directly be defined
per class. Example: “classif.ksvm” and parameter <code>class.weights</code>.
In this case we don't really do anything fancy. We convert <code>wcw.weight</code> a bit,
but basically simply bind its value to the class weighting param.
The wrapper in this case simply offers a convenient, consistent fashion for class weighting -
and tuning! See example below.</p>
<p>b) The learner does not have a direct parameter to support class weighting, but
supports observation weights, so <code>hasLearnerProperties(learner, 'weights')</code> is <code>TRUE</code>.
This means that an individual, arbitrary weight can be set per observation during training.
We set this weight depending on the class internally in the wrapper. Basically we introduce
something like a new “class.weights” parameter for the learner via observation weights.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">makeWeightedClassesWrapper</span><span class="op">(</span><span class="va">learner</span>, wcw.param <span class="op">=</span> <span class="cn">NULL</span>, wcw.weight <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>learner</dt>
<dd><p>(<a href="makeLearner.html">Learner</a> | <code>character(1)</code>)<br>
The classification learner.
If you pass a string the learner will be created via <a href="makeLearner.html">makeLearner</a>.</p></dd>
<dt>wcw.param</dt>
<dd><p>(<code>character(1)</code>)<br>
Name of already existing learner parameter, which allows class weighting.
The default (<code>wcw.param = NULL</code>) will use the parameter defined in
the learner (<code>class.weights.param</code>). During training, the parameter
must accept a named vector of class weights, where length equals the
number of classes.</p></dd>
<dt>wcw.weight</dt>
<dd><p>(<a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a>)<br>
Weight for each class.
Must be a vector of the same number of elements as classes are in task,
and must also be in the same order as the class levels are in
<code>getTaskDesc(task)$class.levels</code>.
For convenience, one must pass a single number in case of binary classification, which
is then taken as the weight of the positive class, while the negative class receives a weight
of 1.
Default is 1.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><a href="makeLearner.html">Learner</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other wrapper: 
<code><a href="makeBaggingWrapper.html">makeBaggingWrapper</a>()</code>,
<code><a href="makeClassificationViaRegressionWrapper.html">makeClassificationViaRegressionWrapper</a>()</code>,
<code><a href="makeConstantClassWrapper.html">makeConstantClassWrapper</a>()</code>,
<code><a href="makeCostSensClassifWrapper.html">makeCostSensClassifWrapper</a>()</code>,
<code><a href="makeCostSensRegrWrapper.html">makeCostSensRegrWrapper</a>()</code>,
<code><a href="makeDownsampleWrapper.html">makeDownsampleWrapper</a>()</code>,
<code><a href="makeDummyFeaturesWrapper.html">makeDummyFeaturesWrapper</a>()</code>,
<code><a href="makeExtractFDAFeatsWrapper.html">makeExtractFDAFeatsWrapper</a>()</code>,
<code><a href="makeFeatSelWrapper.html">makeFeatSelWrapper</a>()</code>,
<code><a href="makeFilterWrapper.html">makeFilterWrapper</a>()</code>,
<code><a href="makeImputeWrapper.html">makeImputeWrapper</a>()</code>,
<code><a href="makeMulticlassWrapper.html">makeMulticlassWrapper</a>()</code>,
<code><a href="makeMultilabelBinaryRelevanceWrapper.html">makeMultilabelBinaryRelevanceWrapper</a>()</code>,
<code><a href="makeMultilabelClassifierChainsWrapper.html">makeMultilabelClassifierChainsWrapper</a>()</code>,
<code><a href="makeMultilabelDBRWrapper.html">makeMultilabelDBRWrapper</a>()</code>,
<code><a href="makeMultilabelNestedStackingWrapper.html">makeMultilabelNestedStackingWrapper</a>()</code>,
<code><a href="makeMultilabelStackingWrapper.html">makeMultilabelStackingWrapper</a>()</code>,
<code><a href="makeOverBaggingWrapper.html">makeOverBaggingWrapper</a>()</code>,
<code><a href="makePreprocWrapperCaret.html">makePreprocWrapperCaret</a>()</code>,
<code><a href="makePreprocWrapper.html">makePreprocWrapper</a>()</code>,
<code><a href="makeRemoveConstantFeaturesWrapper.html">makeRemoveConstantFeaturesWrapper</a>()</code>,
<code><a href="makeSMOTEWrapper.html">makeSMOTEWrapper</a>()</code>,
<code><a href="makeTuneWrapper.html">makeTuneWrapper</a>()</code>,
<code><a href="makeUndersampleWrapper.html">makeUndersampleWrapper</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># using the direct parameter of the SVM (which is already defined in the learner)</span></span>
<span class="r-in"><span class="va">lrn</span> <span class="op">=</span> <span class="fu">makeWeightedClassesWrapper</span><span class="op">(</span><span class="st">"classif.ksvm"</span>, wcw.weight <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="resample.html">holdout</a></span><span class="op">(</span><span class="va">lrn</span>, <span class="va">sonar.task</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Resampling: holdout</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Measures:             mmce      </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [Resample] iter 1:    0.5428571 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Aggregated Result: mmce.test.mean=0.5428571</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="calculateConfusionMatrix.html">calculateConfusionMatrix</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">pred</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         predicted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> true     M  R -err.-</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   M      0 38     38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   R      0 32      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -err.- 0 38     38</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># using the observation weights of logreg</span></span>
<span class="r-in"><span class="va">lrn</span> <span class="op">=</span> <span class="fu">makeWeightedClassesWrapper</span><span class="op">(</span><span class="st">"classif.logreg"</span>, wcw.weight <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="resample.html">holdout</a></span><span class="op">(</span><span class="va">lrn</span>, <span class="va">sonar.task</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Resampling: holdout</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Measures:             mmce      </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>glm.fit: algorithm did not converge</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>glm.fit: fitted probabilities numerically 0 or 1 occurred</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [Resample] iter 1:    0.3285714 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Aggregated Result: mmce.test.mean=0.3285714</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="calculateConfusionMatrix.html">calculateConfusionMatrix</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">pred</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         predicted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> true      M  R -err.-</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   M      28  7      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   R      16 19     16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -err.- 16  7     23</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># tuning the imbalancy param and the SVM param in one go</span></span>
<span class="r-in"><span class="va">lrn</span> <span class="op">=</span> <span class="fu">makeWeightedClassesWrapper</span><span class="op">(</span><span class="st">"classif.ksvm"</span>, wcw.param <span class="op">=</span> <span class="st">"class.weights"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ps</span> <span class="op">=</span> <span class="fu">makeParamSet</span><span class="op">(</span></span>
<span class="r-in">  <span class="fu">makeNumericParam</span><span class="op">(</span><span class="st">"wcw.weight"</span>, lower <span class="op">=</span> <span class="fl">1</span>, upper <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span class="r-in">  <span class="fu">makeNumericParam</span><span class="op">(</span><span class="st">"C"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">12</span>, upper <span class="op">=</span> <span class="fl">12</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>,</span>
<span class="r-in">  <span class="fu">makeNumericParam</span><span class="op">(</span><span class="st">"sigma"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">12</span>, upper <span class="op">=</span> <span class="fl">12</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="makeTuneControlRandom.html">makeTuneControlRandom</a></span><span class="op">(</span>maxit <span class="op">=</span> <span class="fl">3L</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"CV"</span>, iters <span class="op">=</span> <span class="fl">2L</span>, stratify <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="tuneParams.html">tuneParams</a></span><span class="op">(</span><span class="va">lrn</span>, <span class="va">sonar.task</span>, <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, control <span class="op">=</span> <span class="va">ctrl</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [Tune] Started tuning learner weightedclasses.classif.ksvm for parameter set:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>               Type len Def    Constr Req Tunable Trafo</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> wcw.weight numeric   -   -   1 to 10   -    TRUE     -</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> C          numeric   -   - -12 to 12   -    TRUE     Y</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> sigma      numeric   -   - -12 to 12   -    TRUE     Y</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> With control class: TuneControlRandom</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Imputation value: 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [Tune-x] 1: wcw.weight=1.11; C=441; sigma=0.0013</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [Tune-y] 1: mmce.test.mean=0.2644231; time: 0.0 min</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [Tune-x] 2: wcw.weight=3.81; C=0.336; sigma=6.86</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [Tune-y] 2: mmce.test.mean=0.4663462; time: 0.0 min</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [Tune-x] 3: wcw.weight=4.05; C=3.78; sigma=241</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [Tune-y] 3: mmce.test.mean=0.4663462; time: 0.0 min</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [Tune] Result: wcw.weight=1.11; C=441; sigma=0.0013 : mmce.test.mean=0.2644231</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Tune result:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Op. pars: wcw.weight=1.11; C=441; sigma=0.0013</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mmce.test.mean=0.2644231</span>
<span class="r-in"><span class="co"># print(res$opt.path)</span></span>
<span class="r-in"><span class="co"># }</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Patrick Schratz, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer></div>

  

  

  </body></html>

