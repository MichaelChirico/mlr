<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="mlr">
<title>Evaluating Hyperparameter Tuning â€¢ mlr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../../deps/_Roboto-0.4.0/font.css" rel="stylesheet">
<link href="../../deps/_JetBrains%20Mono-0.4.0/font.css" rel="stylesheet">
<link href="../../deps/_Roboto%20Slab-0.4.0/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Evaluating Hyperparameter Tuning">
<meta property="og:description" content="mlr">
<meta property="og:image" content="https://mlr.mlr-org.com/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../../index.html">mlr</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.19.0.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-basics">Basics</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-basics">
    <a class="dropdown-item" href="../../articles/tutorial/task.html">Task</a>
    <a class="dropdown-item" href="../../articles/tutorial/learner.html">Learner</a>
    <a class="dropdown-item" href="../../articles/tutorial/train.html">Train</a>
    <a class="dropdown-item" href="../../articles/tutorial/predict.html">Predict</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../../articles/tutorial/preproc.html">Preprocessing</a>
    <a class="dropdown-item" href="../../articles/tutorial/tune.html">Tuning</a>
    <a class="dropdown-item" href="../../articles/tutorial/resample.html">Resampling</a>
    <a class="dropdown-item" href="../../articles/tutorial/benchmark_experiments.html">Benchmarking</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../../articles/tutorial/parallelization.html">Parallelization</a>
    <a class="dropdown-item" href="../../articles/tutorial/performance.html">Performance</a>
    <a class="dropdown-item" href="../../articles/tutorial/visualization.html">Visualization</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../../articles/tutorial/usecase_regression.html">Use case - Regression</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-advanced">Advanced</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-advanced">
    <a class="dropdown-item" href="../../articles/tutorial/configureMlr.html">mlr Configuration</a>
    <a class="dropdown-item" href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../../articles/tutorial/impute.html">Imputation</a>
    <a class="dropdown-item" href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    <a class="dropdown-item" href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    <a class="dropdown-item" href="../../articles/tutorial/feature_selection.html">Feature Selection/Filtering</a>
    <a class="dropdown-item" href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    <a class="dropdown-item" href="../../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    <a class="dropdown-item" href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    <a class="dropdown-item" href="../../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    <a class="dropdown-item" href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    <a class="dropdown-item" href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    <a class="dropdown-item" href="../../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    <a class="dropdown-item" href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    <a class="dropdown-item" href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    <a class="dropdown-item" href="../../articles/tutorial/handling_of_spatial_data.html">Spatial Data</a>
    <a class="dropdown-item" href="../../articles/tutorial/functional_data.html">Functional Data</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-extending">Extending</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-extending">
    <a class="dropdown-item" href="../../articles/tutorial/create_learner.html">Create Custom Learners</a>
    <a class="dropdown-item" href="../../articles/tutorial/create_measure.html">Create Custom Measures</a>
    <a class="dropdown-item" href="../../articles/tutorial/create_imputation.html">Create Custom Imputation Methods</a>
    <a class="dropdown-item" href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-appendix">Appendix</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-appendix">
    <a class="dropdown-item" href="../../articles/tutorial/example_tasks.html">Integrated Tasks</a>
    <a class="dropdown-item" href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    <a class="dropdown-item" href="../../articles/tutorial/measures.html">Integrated Measures</a>
    <a class="dropdown-item" href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../../articles/tutorial/mlr_publications.html">mlr Publications</a>
    <a class="external-link dropdown-item" href="https://github.com/mlr-org/mlr-outreach">Talks, Videos and Workshops</a>
    <div class="dropdown-divider"></div>
    <a class="external-link dropdown-item" href="https://mlrmbo.mlr-org.com">mlrMBO</a>
    <a class="external-link dropdown-item" href="https://https://mlrcpo.mlr-org.com">mlrCPO</a>
    <a class="external-link dropdown-item" href="https://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    <a class="external-link dropdown-item" href="http://openml.github.io/openml-r/">OpenML</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../../news/index.html">Changelog</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mlr-org/mlr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="hyperpar_tuning_effects_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../../logo.png" class="logo" alt=""><h1>Evaluating Hyperparameter Tuning</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr/blob/HEAD/vignettes/tutorial/hyperpar_tuning_effects.Rmd" class="external-link"><code>vignettes/tutorial/hyperpar_tuning_effects.Rmd</code></a></small>
      <div class="d-none name"><code>hyperpar_tuning_effects.Rmd</code></div>
    </div>

    
    
<pre><code><span class="co">## Warning in register(): Can't find generic `scale_type` in package ggplot2 to</span>
<span class="co">## register S3 method.</span></code></pre>
<p>As mentioned on the <a href="tune.html" target="_blank">tuning</a> tutorial page, tuning a machine learning algorithm typically involves:</p>
<ul>
<li>the hyperparameter search space:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ex: create a search space for the C hyperparameter from 0.01 to 0.1</span>
<span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"C"</span>, lower <span class="op">=</span> <span class="fl">0.01</span>, upper <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<ul>
<li>the optimization algorithm (aka tuning method):</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ex: random search with 100 iterations</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span><span class="op">(</span>maxit <span class="op">=</span> <span class="fl">100L</span><span class="op">)</span></code></pre></div>
<ul>
<li>an evaluation method, i.e., a resampling strategy and a performance measure:</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ex: 2-fold CV</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"CV"</span>, iters <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span></code></pre></div>
<p>After tuning, you may want to evaluate the tuning process in order to answer questions such as:</p>
<ul>
<li>How does varying the value of a hyperparameter change the performance of the machine learning algorithm?</li>
<li>Whatâ€™s the relative importance of each hyperparameter?</li>
<li>How did the optimization algorithm (prematurely) converge?</li>
</ul>
<p><code>mlr</code> provides methods to generate and plot the data in order to evaluate the effect of hyperparameter tuning.</p>
<div class="section level2">
<h2 id="generating-hyperparameter-tuning-data">Generating hyperparameter tuning data<a class="anchor" aria-label="anchor" href="#generating-hyperparameter-tuning-data"></a>
</h2>
<p><code>mlr</code> separates the generation of the data from the plotting of the data in case the user wishes to use the data in a custom way downstream.</p>
<p>The <code><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData()</a></code> method takes the tuning result along with 2 additional arguments: <code>trafo</code> and <code>include.diagnostics</code>. The <code>trafo</code> argument will convert the hyperparameter data to be on the transformed scale in case a transformation was used when creating the parameter (as in the case below). The <code>include.diagnostics</code> argument will tell <code>mlr</code> whether to include the eol and any error messages from the learner.</p>
<p>Below we perform random search on the <code>C</code> parameter for SVM on the famous Pima Indians (<code><a href="https://rdrr.io/pkg/mlbench/man/PimaIndiansDiabetes.html" class="external-link">mlbench::PimaIndiansDiabetes()</a></code>) dataset. We generate the hyperparameter effect data so that the <code>C</code> parameter is on the transformed scale and we do not include diagnostic data:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"C"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span><span class="op">(</span>maxit <span class="op">=</span> <span class="fl">100L</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"CV"</span>, iters <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/tuneParams.html">tuneParams</a></span><span class="op">(</span><span class="st">"classif.ksvm"</span>, task <span class="op">=</span> <span class="va">pid.task</span>, control <span class="op">=</span> <span class="va">ctrl</span>,
  measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">acc</span>, <span class="va">mmce</span><span class="op">)</span>, resampling <span class="op">=</span> <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span>, trafo <span class="op">=</span> <span class="cn">T</span>, include.diagnostics <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co">## HyperParsEffectData:</span>
<span class="co">## Hyperparameters: C</span>
<span class="co">## Measures: acc.test.mean,mmce.test.mean</span>
<span class="co">## Optimizer: TuneControlRandom</span>
<span class="co">## Nested CV Used: FALSE</span>
<span class="co">## Snapshot of data:</span>
<span class="co">##            C acc.test.mean mmce.test.mean iteration exec.time</span>
<span class="co">## 1 0.18477464     0.7317708      0.2682292         1     0.833</span>
<span class="co">## 2 0.19252244     0.7304688      0.2695312         2     0.041</span>
<span class="co">## 3 4.75219120     0.7200521      0.2799479         3     0.040</span>
<span class="co">## 4 0.05567812     0.6536458      0.3463542         4     0.579</span>
<span class="co">## 5 0.12179856     0.7161458      0.2838542         5     0.064</span>
<span class="co">## 6 6.25359181     0.7239583      0.2760417         6     0.056</span></code></pre></div>
<p>As a reminder from the <a href="resample.html" target="_blank">resampling</a> tutorial, if we wanted to generate data on the training set as well as the validation set, we only need to make a few minor changes:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"C"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span><span class="op">(</span>maxit <span class="op">=</span> <span class="fl">100L</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"CV"</span>, iters <span class="op">=</span> <span class="fl">2L</span>, predict <span class="op">=</span> <span class="st">"both"</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/tuneParams.html">tuneParams</a></span><span class="op">(</span><span class="st">"classif.ksvm"</span>, task <span class="op">=</span> <span class="va">pid.task</span>, control <span class="op">=</span> <span class="va">ctrl</span>,
  measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">acc</span>, <span class="fu"><a href="../../reference/setAggregation.html">setAggregation</a></span><span class="op">(</span><span class="va">acc</span>, <span class="va">train.mean</span><span class="op">)</span>, <span class="va">mmce</span>, <span class="fu"><a href="../../reference/setAggregation.html">setAggregation</a></span><span class="op">(</span><span class="va">mmce</span>,
    <span class="va">train.mean</span><span class="op">)</span><span class="op">)</span>, resampling <span class="op">=</span> <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span>, trafo <span class="op">=</span> <span class="cn">T</span>, include.diagnostics <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co">## HyperParsEffectData:</span>
<span class="co">## Hyperparameters: C</span>
<span class="co">## Measures: acc.test.mean,acc.train.mean,mmce.test.mean,mmce.train.mean</span>
<span class="co">## Optimizer: TuneControlRandom</span>
<span class="co">## Nested CV Used: FALSE</span>
<span class="co">## Snapshot of data:</span>
<span class="co">##            C acc.test.mean acc.train.mean mmce.test.mean mmce.train.mean</span>
<span class="co">## 1 0.07253028     0.6575521      0.6588542      0.3424479       0.3411458</span>
<span class="co">## 2 4.09306975     0.7617188      0.8906250      0.2382812       0.1093750</span>
<span class="co">## 3 2.23762232     0.7552083      0.8710938      0.2447917       0.1289062</span>
<span class="co">## 4 0.11080224     0.6940104      0.7187500      0.3059896       0.2812500</span>
<span class="co">## 5 3.37586150     0.7565104      0.8867188      0.2434896       0.1132812</span>
<span class="co">## 6 1.77872565     0.7669271      0.8567708      0.2330729       0.1432292</span>
<span class="co">##   iteration exec.time</span>
<span class="co">## 1         1     0.095</span>
<span class="co">## 2         2     0.079</span>
<span class="co">## 3         3     0.102</span>
<span class="co">## 4         4     0.092</span>
<span class="co">## 5         5     0.071</span>
<span class="co">## 6         6     0.088</span></code></pre></div>
<p>In the example below, we perform grid search on the <code>C</code> parameter for SVM on the Pima Indians dataset using nested cross validation. We generate the hyperparameter effect data so that the <code>C</code> parameter is on the untransformed scale and we do not include diagnostic data. As you can see below, nested cross validation is supported without any extra work by the user, allowing the user to obtain an unbiased estimator for the performance.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"C"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlGrid.html">makeTuneControlGrid</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"CV"</span>, iters <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span>
<span class="va">lrn</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneWrapper.html">makeTuneWrapper</a></span><span class="op">(</span><span class="st">"classif.ksvm"</span>, control <span class="op">=</span> <span class="va">ctrl</span>,
  measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">acc</span>, <span class="va">mmce</span><span class="op">)</span>, resampling <span class="op">=</span> <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/resample.html">resample</a></span><span class="op">(</span><span class="va">lrn</span>, task <span class="op">=</span> <span class="va">pid.task</span>, resampling <span class="op">=</span> <span class="va">cv2</span>, extract <span class="op">=</span> <span class="va">getTuneResult</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>

<span class="co">## HyperParsEffectData:</span>
<span class="co">## Hyperparameters: C</span>
<span class="co">## Measures: acc.test.mean,mmce.test.mean</span>
<span class="co">## Optimizer: TuneControlGrid</span>
<span class="co">## Nested CV Used: TRUE</span>
<span class="co">## Snapshot of data:</span>
<span class="co">##            C acc.test.mean mmce.test.mean iteration exec.time</span>
<span class="co">## 1 -5.0000000     0.6536458      0.3463542         1     0.064</span>
<span class="co">## 2 -3.8888889     0.6536458      0.3463542         2     0.037</span>
<span class="co">## 3 -2.7777778     0.6718750      0.3281250         3     0.036</span>
<span class="co">## 4 -1.6666667     0.7291667      0.2708333         4     0.038</span>
<span class="co">## 5 -0.5555556     0.7369792      0.2630208         5     0.037</span>
<span class="co">## 6  0.5555556     0.7369792      0.2630208         6     0.051</span>
<span class="co">##   nested_cv_run</span>
<span class="co">## 1             1</span>
<span class="co">## 2             1</span>
<span class="co">## 3             1</span>
<span class="co">## 4             1</span>
<span class="co">## 5             1</span>
<span class="co">## 6             1</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"C"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlGrid.html">makeTuneControlGrid</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"CV"</span>, iters <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span>
<span class="va">lrn</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneWrapper.html">makeTuneWrapper</a></span><span class="op">(</span><span class="st">"classif.ksvm"</span>, control <span class="op">=</span> <span class="va">ctrl</span>,
  measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">acc</span>, <span class="va">mmce</span><span class="op">)</span>, resampling <span class="op">=</span> <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/resample.html">resample</a></span><span class="op">(</span><span class="va">lrn</span>, task <span class="op">=</span> <span class="va">pid.task</span>, resampling <span class="op">=</span> <span class="va">cv2</span>, extract <span class="op">=</span> <span class="va">getTuneResult</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>

<span class="co">## HyperParsEffectData:</span>
<span class="co">## Hyperparameters: C</span>
<span class="co">## Measures: acc.test.mean,mmce.test.mean</span>
<span class="co">## Optimizer: TuneControlGrid</span>
<span class="co">## Nested CV Used: TRUE</span>
<span class="co">## Snapshot of data:</span>
<span class="co">##            C acc.test.mean mmce.test.mean iteration exec.time</span>
<span class="co">## 1 -5.0000000     0.6718750      0.3281250         1     0.066</span>
<span class="co">## 2 -3.8888889     0.6718750      0.3281250         2     0.077</span>
<span class="co">## 3 -2.7777778     0.6744792      0.3255208         3     0.070</span>
<span class="co">## 4 -1.6666667     0.7187500      0.2812500         4     0.049</span>
<span class="co">## 5 -0.5555556     0.7526042      0.2473958         5     0.049</span>
<span class="co">## 6  0.5555556     0.7630208      0.2369792         6     0.054</span>
<span class="co">##   nested_cv_run</span>
<span class="co">## 1             1</span>
<span class="co">## 2             1</span>
<span class="co">## 3             1</span>
<span class="co">## 4             1</span>
<span class="co">## 5             1</span>
<span class="co">## 6             1</span></code></pre></div>
<p>After generating the hyperparameter effect data, the next step is to visualize it. <code>mlr</code> has several methods built-in to visualize the data, meant to support the needs of the researcher and the engineer in industry. The next few sections will walk through the visualization support for several use-cases.</p>
</div>
<div class="section level2">
<h2 id="visualizing-the-effect-of-a-single-hyperparameter">Visualizing the effect of a single hyperparameter<a class="anchor" aria-label="anchor" href="#visualizing-the-effect-of-a-single-hyperparameter"></a>
</h2>
<p>In a situation when the user is tuning a single hyperparameter for a learner, the user may wish to plot the performance of the learner against the values of the hyperparameter.</p>
<p>In the example below, we tune the number of clusters against the silhouette score on the mtcars dataset. We specify the x-axis with the <code>x</code> argument and the y-axis with the <code>y</code> argument. If the <code>plot.type</code> argument is not specified, <code>mlr</code> will attempt to plot a scatterplot by default. Since <code><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect()</a></code> returns a <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot2::ggplot()</a></code> object, we can easily customize it to our liking!</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="http://keii.ue.wroc.pl/clusterSim/" class="external-link">"clusterSim"</a></span><span class="op">)</span>

<span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeDiscreteParam</a></span><span class="op">(</span><span class="st">"centers"</span>, values <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlGrid.html">makeTuneControlGrid</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"Holdout"</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/tuneParams.html">tuneParams</a></span><span class="op">(</span><span class="st">"cluster.kmeans"</span>, task <span class="op">=</span> <span class="va">mtcars.task</span>, control <span class="op">=</span> <span class="va">ctrl</span>,
  measures <span class="op">=</span> <span class="va">silhouette</span>, resampling <span class="op">=</span> <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="va">plt</span> <span class="op">=</span> <span class="fu"><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect</a></span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="st">"centers"</span>, y <span class="op">=</span> <span class="st">"silhouette.test.mean"</span><span class="op">)</span>

<span class="co"># add our own touches to the plot</span>
<span class="va">plt</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Evaluating Number of Cluster Centers on mtcars"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>In the example below, we tune SVM with the <code>C</code> hyperparameter on the Pima dataset. We will use simulated annealing optimizer, so we are interested in seeing if the optimization algorithm actually improves with iterations. By default, <code>mlr</code> only plots improvements to the global optimum.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"C"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlGenSA.html">makeTuneControlGenSA</a></span><span class="op">(</span>budget <span class="op">=</span> <span class="fl">100L</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"Holdout"</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/tuneParams.html">tuneParams</a></span><span class="op">(</span><span class="st">"classif.ksvm"</span>, task <span class="op">=</span> <span class="va">pid.task</span>, control <span class="op">=</span> <span class="va">ctrl</span>,
  resampling <span class="op">=</span> <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="va">plt</span> <span class="op">=</span> <span class="fu"><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect</a></span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="st">"iteration"</span>, y <span class="op">=</span> <span class="st">"mmce.test.mean"</span>,
  plot.type <span class="op">=</span> <span class="st">"line"</span><span class="op">)</span>
<span class="va">plt</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Analyzing convergence of simulated annealing"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="hyperpar_tuning_effects_files/figure-html/sa_single-1.png" width="700"></p>
<p>In the case of a learner crash, <code>mlr</code> will impute the crash with the worst value graphically and indicate the point. In the example below, we give the <code>C</code> parameter negative values, which will result in a learner crash for SVM.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeDiscreteParam</a></span><span class="op">(</span><span class="st">"C"</span>, values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">1.5</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlGrid.html">makeTuneControlGrid</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"CV"</span>, iters <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/tuneParams.html">tuneParams</a></span><span class="op">(</span><span class="st">"classif.ksvm"</span>, task <span class="op">=</span> <span class="va">pid.task</span>, control <span class="op">=</span> <span class="va">ctrl</span>,
  measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">acc</span>, <span class="va">mmce</span><span class="op">)</span>, resampling <span class="op">=</span> <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="va">plt</span> <span class="op">=</span> <span class="fu"><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect</a></span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="st">"C"</span>, y <span class="op">=</span> <span class="st">"acc.test.mean"</span><span class="op">)</span>
<span class="va">plt</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"SVM learner crashes with negative C"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="hyperpar_tuning_effects_files/figure-html/single_crash-1.png" width="700"></p>
<p>The example below uses <a href="nested_resampling.html" target="_blank">nested cross validation</a> with an outer loop of 2 runs. <code>mlr</code> indicates each run within the visualization.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"C"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlGrid.html">makeTuneControlGrid</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"Holdout"</span><span class="op">)</span>
<span class="va">lrn</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneWrapper.html">makeTuneWrapper</a></span><span class="op">(</span><span class="st">"classif.ksvm"</span>, control <span class="op">=</span> <span class="va">ctrl</span>,
  measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">acc</span>, <span class="va">mmce</span><span class="op">)</span>, resampling <span class="op">=</span> <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/resample.html">resample</a></span><span class="op">(</span><span class="va">lrn</span>, task <span class="op">=</span> <span class="va">pid.task</span>, resampling <span class="op">=</span> <span class="va">cv2</span>, extract <span class="op">=</span> <span class="va">getTuneResult</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="fu"><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect</a></span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="st">"C"</span>, y <span class="op">=</span> <span class="st">"acc.test.mean"</span>, plot.type <span class="op">=</span> <span class="st">"line"</span><span class="op">)</span></code></pre></div>
<p><img src="hyperpar_tuning_effects_files/figure-html/single_nested-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="visualizing-the-effect-of-2-hyperparameters">Visualizing the effect of 2 hyperparameters<a class="anchor" aria-label="anchor" href="#visualizing-the-effect-of-2-hyperparameters"></a>
</h2>
<p>In the case of tuning 2 hyperparameters simultaneously, <code>mlr</code> provides the ability to plot a heatmap and contour plot in addition to a scatterplot or line.</p>
<p>In the example below, we tune the <code>C</code> and <code>sigma</code> parameters for SVM on the Pima dataset. We use interpolation to produce a regular grid for plotting the heatmap. The <code>interpolation</code> argument accepts any regression learner from <code>mlr</code> to perform the interpolation. The <code>z</code> argument will be used to fill the heatmap or color lines, depending on the <code>plot.type</code> used.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"C"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>,
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"sigma"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span><span class="op">(</span>maxit <span class="op">=</span> <span class="fl">100L</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"Holdout"</span><span class="op">)</span>
<span class="va">learn</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeLearner.html">makeLearner</a></span><span class="op">(</span><span class="st">"classif.ksvm"</span>, par.vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>kernel <span class="op">=</span> <span class="st">"rbfdot"</span><span class="op">)</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/tuneParams.html">tuneParams</a></span><span class="op">(</span><span class="va">learn</span>, task <span class="op">=</span> <span class="va">pid.task</span>, control <span class="op">=</span> <span class="va">ctrl</span>, measures <span class="op">=</span> <span class="va">acc</span>,
  resampling <span class="op">=</span> <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="va">plt</span> <span class="op">=</span> <span class="fu"><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect</a></span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="st">"C"</span>, y <span class="op">=</span> <span class="st">"sigma"</span>, z <span class="op">=</span> <span class="st">"acc.test.mean"</span>,
  plot.type <span class="op">=</span> <span class="st">"heatmap"</span>, interpolate <span class="op">=</span> <span class="st">"regr.earth"</span><span class="op">)</span>
<span class="va">min_plt</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">acc.test.mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">max_plt</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">acc.test.mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">med_plt</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">min_plt</span>, <span class="va">max_plt</span><span class="op">)</span><span class="op">)</span>
<span class="va">plt</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_fill_gradient2</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">min_plt</span>, <span class="va">max_plt</span>, length.out <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,
  low <span class="op">=</span> <span class="st">"blue"</span>, mid <span class="op">=</span> <span class="st">"white"</span>, high <span class="op">=</span> <span class="st">"red"</span>, midpoint <span class="op">=</span> <span class="va">med_plt</span><span class="op">)</span>
<span class="co">## Scale for 'fill' is already present. Adding another scale for 'fill', which</span>
<span class="co">## will replace the existing scale.</span></code></pre></div>
<p><img src="hyperpar_tuning_effects_files/figure-html/two-1.png" width="700"></p>
<p>We can use the <code>show.experiments</code> argument in order to visualize which points were specifically passed to the learner in the original experiment and which points were interpolated by <code>mlr</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">plt</span> <span class="op">=</span> <span class="fu"><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect</a></span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="st">"C"</span>, y <span class="op">=</span> <span class="st">"sigma"</span>, z <span class="op">=</span> <span class="st">"acc.test.mean"</span>,
  plot.type <span class="op">=</span> <span class="st">"heatmap"</span>, interpolate <span class="op">=</span> <span class="st">"regr.earth"</span>, show.experiments <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">plt</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_fill_gradient2</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">min_plt</span>, <span class="va">max_plt</span>, length.out <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,
  low <span class="op">=</span> <span class="st">"blue"</span>, mid <span class="op">=</span> <span class="st">"white"</span>, high <span class="op">=</span> <span class="st">"red"</span>, midpoint <span class="op">=</span> <span class="va">med_plt</span><span class="op">)</span>
<span class="co">## Scale for 'fill' is already present. Adding another scale for 'fill', which</span>
<span class="co">## will replace the existing scale.</span></code></pre></div>
<p><img src="hyperpar_tuning_effects_files/figure-html/two_showargs-1.png" width="700"></p>
<p>We can also visualize how long the optimizer takes to reach an optima for the same example:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect</a></span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="st">"iteration"</span>, y <span class="op">=</span> <span class="st">"acc.test.mean"</span>,
  plot.type <span class="op">=</span> <span class="st">"line"</span><span class="op">)</span></code></pre></div>
<p><img src="hyperpar_tuning_effects_files/figure-html/two_optima-1.png" width="700"></p>
<p>In the case where we are tuning 2 hyperparameters and we have a learner crash, <code>mlr</code> will indicate the respective points and impute them with the worst value. In the example below, we tune <code>C</code> and <code>sigma</code>, forcing <code>C</code> to be negative for some instances which will crash SVM. We perform interpolation to get a regular grid in order to plot a heatmap. We can see that the interpolation creates axis parallel lines resulting from the learner crashes.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeDiscreteParam</a></span><span class="op">(</span><span class="st">"C"</span>, values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0.5</span>, <span class="fl">1.5</span>, <span class="fl">1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.4</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeDiscreteParam</a></span><span class="op">(</span><span class="st">"sigma"</span>, values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0.5</span>, <span class="fl">1.5</span>, <span class="fl">1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.4</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlGrid.html">makeTuneControlGrid</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"Holdout"</span><span class="op">)</span>
<span class="va">learn</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeLearner.html">makeLearner</a></span><span class="op">(</span><span class="st">"classif.ksvm"</span>, par.vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>kernel <span class="op">=</span> <span class="st">"rbfdot"</span><span class="op">)</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/tuneParams.html">tuneParams</a></span><span class="op">(</span><span class="va">learn</span>, task <span class="op">=</span> <span class="va">pid.task</span>, control <span class="op">=</span> <span class="va">ctrl</span>, measures <span class="op">=</span> <span class="va">acc</span>,
  resampling <span class="op">=</span> <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="fu"><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect</a></span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="st">"C"</span>, y <span class="op">=</span> <span class="st">"sigma"</span>, z <span class="op">=</span> <span class="st">"acc.test.mean"</span>,
  plot.type <span class="op">=</span> <span class="st">"heatmap"</span>, interpolate <span class="op">=</span> <span class="st">"regr.earth"</span><span class="op">)</span></code></pre></div>
<p><img src="hyperpar_tuning_effects_files/figure-html/two_crash-1.png" width="700"></p>
<p>A slightly more complicated example is using nested cross validation while simultaneously tuning 2 hyperparameters. In order to plot a heatmap in this case, <code>mlr</code> will aggregate each of the nested runs by a user-specified function. The default function is <code>mean</code>. As expected, we can still take advantage of interpolation.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"C"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>,
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"sigma"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span><span class="op">(</span>maxit <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"Holdout"</span><span class="op">)</span>
<span class="va">learn</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeLearner.html">makeLearner</a></span><span class="op">(</span><span class="st">"classif.ksvm"</span>, par.vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>kernel <span class="op">=</span> <span class="st">"rbfdot"</span><span class="op">)</span><span class="op">)</span>
<span class="va">lrn</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneWrapper.html">makeTuneWrapper</a></span><span class="op">(</span><span class="va">learn</span>, control <span class="op">=</span> <span class="va">ctrl</span>, measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">acc</span>, <span class="va">mmce</span><span class="op">)</span>,
  resampling <span class="op">=</span> <span class="va">rdesc</span>, par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/resample.html">resample</a></span><span class="op">(</span><span class="va">lrn</span>, task <span class="op">=</span> <span class="va">pid.task</span>, resampling <span class="op">=</span> <span class="va">cv2</span>, extract <span class="op">=</span> <span class="va">getTuneResult</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="va">plt</span> <span class="op">=</span> <span class="fu"><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect</a></span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="st">"C"</span>, y <span class="op">=</span> <span class="st">"sigma"</span>, z <span class="op">=</span> <span class="st">"acc.test.mean"</span>,
  plot.type <span class="op">=</span> <span class="st">"heatmap"</span>, interpolate <span class="op">=</span> <span class="st">"regr.earth"</span>, show.experiments <span class="op">=</span> <span class="cn">TRUE</span>,
  nested.agg <span class="op">=</span> <span class="va">mean</span><span class="op">)</span>
<span class="va">min_plt</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">plt</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">acc.test.mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">max_plt</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">plt</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">acc.test.mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">med_plt</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">min_plt</span>, <span class="va">max_plt</span><span class="op">)</span><span class="op">)</span>
<span class="va">plt</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_fill_gradient2</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">min_plt</span>, <span class="va">max_plt</span>, length.out <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,
  low <span class="op">=</span> <span class="st">"red"</span>, mid <span class="op">=</span> <span class="st">"white"</span>, high <span class="op">=</span> <span class="st">"blue"</span>, midpoint <span class="op">=</span> <span class="va">med_plt</span><span class="op">)</span>
<span class="co">## Scale for 'fill' is already present. Adding another scale for 'fill', which</span>
<span class="co">## will replace the existing scale.</span></code></pre></div>
<p><img src="hyperpar_tuning_effects_files/figure-html/two_nested-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="visualizing-the-effects-of-more-than-2-hyperparameters">Visualizing the effects of more than 2 hyperparameters<a class="anchor" aria-label="anchor" href="#visualizing-the-effects-of-more-than-2-hyperparameters"></a>
</h2>
<p>In order to visualize the result when tuning 3 or more hyperparameters simultaneously we can take advantage of <a href="partial_dependence.html" target="_blank">partial dependence plots</a> to show how the performance depends on a one- or two-dimensional subset of the hyperparameters. Below we tune three hyperparameters <code>C</code>, <code>sigma</code>, and <code>degree</code> of an SVM with Bessel kernel and set the <code>partial.dep</code> flag to <code>TRUE</code> to indicate that we intend to calculate partial dependences.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">=</span> <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/makeParamSet.html" class="external-link">makeParamSet</a></span><span class="op">(</span>
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"C"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>,
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeNumericParam</a></span><span class="op">(</span><span class="st">"sigma"</span>, lower <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, upper <span class="op">=</span> <span class="fl">5</span>, trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>,
  <span class="fu"><a href="https://paramhelpers.mlr-org.com/reference/Param.html" class="external-link">makeDiscreteParam</a></span><span class="op">(</span><span class="st">"degree"</span>, values <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="va">ctrl</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span><span class="op">(</span>maxit <span class="op">=</span> <span class="fl">100L</span><span class="op">)</span>
<span class="va">rdesc</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span><span class="op">(</span><span class="st">"Holdout"</span>, predict <span class="op">=</span> <span class="st">"both"</span><span class="op">)</span>
<span class="va">learn</span> <span class="op">=</span> <span class="fu"><a href="../../reference/makeLearner.html">makeLearner</a></span><span class="op">(</span><span class="st">"classif.ksvm"</span>, par.vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>kernel <span class="op">=</span> <span class="st">"besseldot"</span><span class="op">)</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../../reference/tuneParams.html">tuneParams</a></span><span class="op">(</span><span class="va">learn</span>, task <span class="op">=</span> <span class="va">pid.task</span>, control <span class="op">=</span> <span class="va">ctrl</span>,
  measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">acc</span>, <span class="fu"><a href="../../reference/setAggregation.html">setAggregation</a></span><span class="op">(</span><span class="va">acc</span>, <span class="va">train.mean</span><span class="op">)</span><span class="op">)</span>, resampling <span class="op">=</span> <span class="va">rdesc</span>,
  par.set <span class="op">=</span> <span class="va">ps</span>, show.info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="../../reference/generateHyperParsEffectData.html">generateHyperParsEffectData</a></span><span class="op">(</span><span class="va">res</span>, partial.dep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>You can generate a plot for a single hyperparameter like <code>C</code> as shown below. The <code>partial.dep.learn</code> can be any regression Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) in <code>mlr</code> and is used to regress the attained performance values on the values of the 3 hyperparameters visited during tuning. The fitted model serves as basis for calculating partial dependences.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect</a></span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="st">"C"</span>, y <span class="op">=</span> <span class="st">"acc.test.mean"</span>, plot.type <span class="op">=</span> <span class="st">"line"</span>,
  partial.dep.learn <span class="op">=</span> <span class="st">"regr.randomForest"</span><span class="op">)</span>
<span class="co">## Loading required package: mmpf</span></code></pre></div>
<p><img src="hyperpar_tuning_effects_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>We can also look at two hyperparameters simultaneously, for example <code>C</code> and <code>sigma</code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/plotHyperParsEffect.html">plotHyperParsEffect</a></span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="st">"C"</span>, y <span class="op">=</span> <span class="st">"sigma"</span>, z <span class="op">=</span> <span class="st">"acc.test.mean"</span>,
  plot.type <span class="op">=</span> <span class="st">"heatmap"</span>, partial.dep.learn <span class="op">=</span> <span class="st">"regr.randomForest"</span><span class="op">)</span></code></pre></div>
<p><img src="hyperpar_tuning_effects_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Patrick Schratz, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
